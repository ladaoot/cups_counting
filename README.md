# Практика: компьютерное зрение (подсчёт стаканов/кружек в кофейне)

Вариант: **Автоматизация учета в кофейне (подсчет стаканов/кружек)**.

## Что реализовано
- **Детекция** объектов “cup/mug” предобученной моделью **YOLOv8 (COCO)**.
- **Веб‑приложение** на Streamlit:
  - загрузка **изображений** и **видео**
  - обработка с кнопки
  - визуализация боксов + **подсчёт**
  - (опционально) поток с веб‑камеры
- **Статистика/история** запросов: сохранение в `data/history.jsonl`
- **Отчёты** по истории: выгрузка **Excel** и **PDF**

> Примечание: модель COCO содержит классы, близкие к задаче: `cup` (и иногда `wine glass`). В кофейной задаче считаем чашки/стаканы по выбранным классам.

## Установка
Рекомендуется Python 3.10+.

```bash
python -m venv .venv
.venv\Scripts\activate
pip install -r requirements.txt
```

## Запуск
```bash
streamlit run app.py
```

Откройте страницу, загрузите файл и нажмите **Запустить обработку**.

## Структура проекта
- `app.py` — основной файл Streamlit-приложения, содержащий веб-интерфейс
- `src/` — исходный код приложения
  - `infer.py` — модуль для инференса модели YOLO, обработки изображений и видео
  - `camera.py` — обработка видеопотока с веб-камеры в реальном времени
  - `history_manager.py` — управление историей запросов (добавление, получение, очистка)
  - `analytics.py` — анализ статистики и визуализация данных
  - `reports.py` — генерация отчётов в форматах Excel и PDF
  - `history.py` — базовые функции работы с историей (структуры данных, утилиты)
- `data/` — данные приложения
  - `history.jsonl` — история запросов в формате JSON Lines
  - `video_frames_index.jsonl` — индекс данных по кадрам обработанных видео

## Быстрый отчёт (файлы)
В приложении есть кнопки “Скачать Excel” и “Скачать PDF”.

